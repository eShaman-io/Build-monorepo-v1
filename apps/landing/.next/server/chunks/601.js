exports.id=601,exports.ids=[601],exports.modules={2274:(e,t,r)=>{Promise.resolve().then(r.bind(r,69089)),Promise.resolve().then(r.bind(r,5968)),Promise.resolve().then(r.bind(r,48659)),Promise.resolve().then(r.bind(r,39649)),Promise.resolve().then(r.bind(r,93256)),Promise.resolve().then(r.bind(r,43556)),Promise.resolve().then(r.bind(r,73456)),Promise.resolve().then(r.bind(r,51289)),Promise.resolve().then(r.bind(r,84844)),Promise.resolve().then(r.bind(r,51221)),Promise.resolve().then(r.bind(r,9361)),Promise.resolve().then(r.bind(r,99614)),Promise.resolve().then(r.bind(r,4229)),Promise.resolve().then(r.bind(r,18552)),Promise.resolve().then(r.bind(r,34246)),Promise.resolve().then(r.bind(r,84357)),Promise.resolve().then(r.bind(r,78430)),Promise.resolve().then(r.bind(r,92005)),Promise.resolve().then(r.bind(r,76528)),Promise.resolve().then(r.bind(r,64312)),Promise.resolve().then(r.bind(r,17645)),Promise.resolve().then(r.bind(r,42221)),Promise.resolve().then(r.bind(r,13617)),Promise.resolve().then(r.bind(r,64568)),Promise.resolve().then(r.bind(r,16782)),Promise.resolve().then(r.bind(r,53632)),Promise.resolve().then(r.bind(r,21540)),Promise.resolve().then(r.bind(r,69032)),Promise.resolve().then(r.bind(r,85093)),Promise.resolve().then(r.bind(r,7153)),Promise.resolve().then(r.bind(r,1010))},30784:(e,t,r)=>{"use strict";var s=Object.defineProperty,a=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,l=Object.prototype.hasOwnProperty,i={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(i,{AuthProvider:()=>w,ChatBubble:()=>f,CrystalTabs:()=>b,ForumThreadCreator:()=>eB,ForumThreadList:()=>eH,GlassCard:()=>d,JournalEditor:()=>e_,JournalFeed:()=>eM,Login:()=>D,MeditationList:()=>eZ,MysticPill:()=>h,OracleChat:()=>K,OrbButton:()=>u,Pricing:()=>ec,Profile:()=>es,PurchasesAuthProvider:()=>e1,RitualCreator:()=>eg,RitualList:()=>ey,Signup:()=>B,Waitlist:()=>A,useAuth:()=>P}),e.exports=((e,t,r,i)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let r of n(t))l.call(e,r)||void 0===r||s(e,r,{get:()=>t[r],enumerable:!(i=a(t,r))||i.enumerable});return e})(s({},"__esModule",{value:!0}),i);var o=r(19264);function d({children:e,className:t=""}){return(0,o.jsx)("div",{className:`backdrop-blur-sm bg-white/10 border border-white/20 rounded-2xl p-4 ${t}`,style:{backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:e})}var c=r(19264);function u({onPress:e,title:t,disabled:r=!1}){return(0,c.jsx)("button",{onClick:r?void 0:e,disabled:r,className:`rounded-full p-4 text-center text-lg font-bold text-white ${r?"bg-gray-400 cursor-not-allowed":"bg-brand-secondary hover:bg-brand-secondary/80 cursor-pointer"}`,children:t})}var m=r(19264);function h({text:e}){return(0,m.jsx)("div",{className:"rounded-full border border-brand-secondary px-4 py-2",children:(0,m.jsx)("span",{className:"text-brand-secondary",children:e})})}var x=r(19264);function b({tabs:e,activeTab:t,onTabChange:r,className:s="",style:a}){return(0,x.jsx)("div",{className:`crystal-tabs flex bg-white/5 rounded-2xl p-1 border border-white/10 ${s}`,style:a,children:e.map(e=>{let s=e.id===t;return(0,x.jsxs)("button",{className:`flex-1 px-4 py-2 rounded-xl flex flex-col items-center justify-center transition-all duration-200 ${s?"bg-blue-500/20 border border-blue-400/30 text-blue-400 font-semibold":"text-slate-300 hover:text-slate-200 hover:bg-white/5"}`,onClick:()=>r(e.id),children:[e.icon&&(0,x.jsx)("div",{className:"mb-1",children:e.icon}),(0,x.jsx)("span",{className:"text-sm",children:e.label})]},e.id)})})}var p=r(96429),g=r(19264);function f({message:e,role:t,timestamp:r,className:s="",style:a,textStyle:n}){let l="user"===t,i={color:"#0A0F1F"},o={color:"#DFE7FF"};return(0,g.jsx)(p.View,{style:[{alignSelf:l?"flex-end":"flex-start",maxWidth:"80%",marginVertical:4},a],className:`chat-bubble ${t} ${s}`,children:(0,g.jsxs)(p.View,{style:[{paddingHorizontal:16,paddingVertical:12,borderRadius:20,borderWidth:1},l?{backgroundColor:"rgba(0, 212, 255, 0.9)",borderColor:"rgba(0, 212, 255, 0.3)",borderTopRightRadius:8}:{backgroundColor:"rgba(255, 255, 255, 0.08)",borderColor:"rgba(255, 255, 255, 0.16)",borderTopLeftRadius:8}],children:[(0,g.jsx)(p.Text,{style:[{fontSize:16,lineHeight:22},l?i:o,n],children:e.content}),r&&(0,g.jsx)(p.Text,{style:[{fontSize:12,marginTop:4,opacity:.6},l?i:o],children:r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})}var j=r(54283),N=r(85494),v=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),y=r(19264),O=(0,j.createContext)({user:null,loading:!0});(0,v.initFirebase)({apiKey:"AIzaSyBPMylKhV31reFYhd78jxLPdkP4QWynLAw",authDomain:"eshamanio.firebaseapp.com",projectId:"eshamanio"});var w=({children:e})=>{let[t,r]=(0,j.useState)(null),[s,a]=(0,j.useState)(!0);return(0,j.useEffect)(()=>{let e=(0,v.getFirebaseAuth)(),t=(0,N.onAuthStateChanged)(e,e=>{r(e),a(!1)});return()=>t()},[]),(0,y.jsx)(O.Provider,{value:{user:t,loading:s},children:e})},P=()=>(0,j.useContext)(O),S=r(54283),E=r(85494),F=r(19264);function D(){let[e,t]=(0,S.useState)(""),[r,s]=(0,S.useState)(""),[a,n]=(0,S.useState)(null),l=async()=>{try{let t=(0,E.getAuth)();await (0,E.signInWithEmailAndPassword)(t,e,r)}catch(e){n(e.message)}};return(0,F.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,F.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>t(e.target.value),className:"rounded-lg bg-brand-primary-light p-4 text-white"}),(0,F.jsx)("input",{type:"password",placeholder:"Password",value:r,onChange:e=>s(e.target.value),className:"rounded-lg bg-brand-primary-light p-4 text-white"}),a&&(0,F.jsx)("p",{className:"text-red-500",children:a}),(0,F.jsx)(u,{onPress:l,title:"Login"})]})}var _=r(54283),C=r(78361),U=r(67038),T=r(Object(function(){var e=Error("Cannot find module '@eshamanio/schemas'");throw e.code="MODULE_NOT_FOUND",e}())),L=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),M=r(19264);function A(){let[e,t]=(0,_.useState)("idle"),[r,s]=(0,_.useState)(null),{register:a,handleSubmit:n,formState:{errors:l}}=(0,C.useForm)({resolver:(0,U.zodResolver)(T.WaitlistSchema)}),i=async e=>{t("loading"),s(null);try{let r=(0,L.getFirebaseFunctions)(),s=(0,L.httpsCallable)(r,"addToWaitlist");await s(e),t("success")}catch(e){t("error"),s(e.message)}};return"success"===e?(0,M.jsxs)("div",{className:"text-center",children:[(0,M.jsx)("h2",{className:"text-2xl font-bold",children:"Thank you for joining the waitlist!"}),(0,M.jsx)("p",{className:"text-brand-neutral-dark",children:"We'll be in touch soon."})]}):(0,M.jsxs)("form",{onSubmit:n(i),className:"flex flex-col space-y-4",children:[(0,M.jsx)("input",{...a("email"),placeholder:"Enter your email",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),l.email&&(0,M.jsx)("p",{className:"text-red-500",children:l.email.message}),r&&(0,M.jsx)("p",{className:"text-red-500",children:r}),(0,M.jsx)(u,{onPress:n(i),title:"loading"===e?"Joining...":"Join the Waitlist",disabled:"loading"===e})]})}var R=r(54283),k=r(78361),I=r(67038),W=r(Object(function(){var e=Error("Cannot find module '@eshamanio/schemas'");throw e.code="MODULE_NOT_FOUND",e}())),z=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),Y=r(19264);function B(){let[e,t]=(0,R.useState)("idle"),[r,s]=(0,R.useState)(null),{register:a,handleSubmit:n,formState:{errors:l}}=(0,k.useForm)({resolver:(0,I.zodResolver)(W.SignupSchema)}),i=async e=>{t("loading"),s(null);try{let r=(0,z.getFirebaseFunctions)(),s=(0,z.httpsCallable)(r,"onUserSignup");await s(e),t("success")}catch(e){t("error"),s(e.message)}};return"success"===e?(0,Y.jsxs)("div",{className:"text-center",children:[(0,Y.jsx)("h2",{className:"text-2xl font-bold",children:"Welcome to eShaman!"}),(0,Y.jsx)("p",{className:"text-brand-neutral-dark",children:"Your account is being created. You will be able to log in shortly."})]}):(0,Y.jsxs)("form",{onSubmit:n(i),className:"flex flex-col space-y-4",children:[(0,Y.jsx)("input",{...a("name"),placeholder:"Name",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),l.name&&(0,Y.jsx)("p",{className:"text-red-500",children:l.name.message}),(0,Y.jsx)("input",{...a("email"),placeholder:"Email",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),l.email&&(0,Y.jsx)("p",{className:"text-red-500",children:l.email.message}),(0,Y.jsx)("input",{...a("password"),type:"password",placeholder:"Password",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),l.password&&(0,Y.jsx)("p",{className:"text-red-500",children:l.password.message}),r&&(0,Y.jsx)("p",{className:"text-red-500",children:r}),(0,Y.jsx)(u,{onPress:n(i),title:"loading"===e?"Creating Account...":"Create Account",disabled:"loading"===e})]})}var $=r(54283),J=r(36002),q=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),V=r(19264),H="_test_chat_session_";function K(){let[e,t]=(0,$.useState)([]),[r,s]=(0,$.useState)(""),[a,n]=(0,$.useState)(!1),l=(0,$.useRef)(null);(0,$.useEffect)(()=>{let e=(0,q.getFirebaseDb)(),r=(0,J.collection)(e,"chats",H,"messages"),s=(0,J.query)(r,(0,J.orderBy)("timestamp")),a=(0,J.onSnapshot)(s,e=>{t(e.docs.map(e=>e.data())),n(!1)});return()=>a()},[]),(0,$.useEffect)(()=>{var e;null==(e=l.current)||e.scrollTo({top:l.current.scrollHeight,behavior:"smooth"})},[e]);let i=async()=>{if(!r.trim())return;n(!0);let e=(0,q.getFirebaseDb)(),t=(0,J.collection)(e,"chats",H,"messages");await (0,J.addDoc)(t,{role:"user",content:r,timestamp:(0,J.serverTimestamp)()}),s("")};return(0,V.jsxs)("div",{className:"flex h-[70vh] w-full max-w-2xl flex-col rounded-lg bg-brand-primary-light p-4 shadow-lg",children:[(0,V.jsxs)("div",{ref:l,className:"flex-1 space-y-4 overflow-y-auto p-2",children:[e.map((e,t)=>(0,V.jsx)(f,{message:e.content,role:e.role,timestamp:e.timestamp},t)),a&&(0,V.jsx)("div",{className:"self-start rounded-lg bg-brand-primary p-3",children:(0,V.jsx)("p",{className:"animate-pulse text-brand-neutral-dark",children:"The oracle is typing..."})})]}),(0,V.jsxs)("form",{onSubmit:i,className:"mt-4 flex items-center space-x-2",children:[(0,V.jsx)("input",{value:r,onChange:e=>s(e.target.value),placeholder:"Ask the oracle...",className:"flex-1 rounded-lg bg-brand-primary p-4 text-white"}),(0,V.jsx)(u,{onPress:i,title:"Send",disabled:a})]})]})}var G=r(54283),Q=r(78361),X=r(67038),Z=r(Object(function(){var e=Error("Cannot find module '@eshamanio/schemas'");throw e.code="MODULE_NOT_FOUND",e}())),ee=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),et=r(36002),er=r(19264);function es(){let{user:e,loading:t}=P(),[r,s]=(0,G.useState)("idle"),[a,n]=(0,G.useState)(null),{register:l,handleSubmit:i,reset:o,formState:{errors:d}}=(0,Q.useForm)({resolver:(0,X.zodResolver)(Z.UserProfileSchema)});(0,G.useEffect)(()=>{if(e){let t=(0,ee.getFirebaseDb)(),r=(0,et.doc)(t,"users",e.uid),s=(0,et.onSnapshot)(r,e=>{e.exists()&&o(e.data())});return()=>s()}},[e,o]);let c=async e=>{s("loading"),n(null);try{let t=(0,ee.getFirebaseFunctions)(),r=(0,ee.httpsCallable)(t,"updateUserProfile");await r(e),s("success")}catch(e){s("error"),n(e.message)}};return t?(0,er.jsx)("p",{children:"Loading..."}):e?(0,er.jsxs)("form",{onSubmit:i(c),className:"flex flex-col space-y-4",children:[(0,er.jsx)("h2",{className:"text-3xl font-bold",children:"Your Profile"}),(0,er.jsx)("input",{...l("name"),placeholder:"Your Name",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),d.name&&(0,er.jsx)("p",{className:"text-red-500",children:d.name.message}),(0,er.jsx)("input",{...l("avatarUrl"),placeholder:"Avatar URL",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),d.avatarUrl&&(0,er.jsx)("p",{className:"text-red-500",children:d.avatarUrl.message}),a&&(0,er.jsx)("p",{className:"text-red-500",children:a}),"success"===r&&(0,er.jsx)("p",{className:"text-green-500",children:"Profile updated successfully!"}),(0,er.jsx)(u,{onPress:i(c),title:"loading"===r?"Saving...":"Save Profile",disabled:"loading"===r})]}):(0,er.jsx)("p",{children:"Please log in to view your profile."})}var ea=r(54283),en=r(24580),el=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),ei=r(49604),eo=r(19264),ed=(0,en.loadStripe)(process.env.NEXT_PUBLIC_STRIPE_PUBLIC_KEY);function ec(){let{user:e}=P(),{t}=(0,ei.useTranslation)(),[r,s]=(0,ea.useState)(!1),[a,n]=(0,ea.useState)(null),l=async()=>{if(s(!0),n(null),!e){n("You must be logged in to subscribe."),s(!1);return}try{let e=(0,el.getFirebaseFunctions)(),t=(0,el.httpsCallable)(e,"createCheckoutSession"),{data:r}=await t({priceId:"price_1PQRgRDEa5giQ3_example_premium",successUrl:`${window.location.origin}/profile?session_id={CHECKOUT_SESSION_ID}`,cancelUrl:window.location.href}),s=await ed;if(s){let{error:e}=await s.redirectToCheckout({sessionId:r.sessionId});e&&n(e.message||"Payment error occurred")}}catch(e){n(e.message)}finally{s(!1)}};return(0,eo.jsxs)(d,{className:"p-8",children:[(0,eo.jsx)("h2",{className:"mb-4 text-center text-4xl font-bold",children:t("premium_subscription")}),(0,eo.jsx)("p",{className:"mb-8 text-center text-brand-neutral-dark",children:"Unlock the full eShaman experience."}),(0,eo.jsxs)("ul",{className:"mb-8 space-y-2",children:[(0,eo.jsxs)("li",{children:["✓ ",t("unlimited_oracle")]}),(0,eo.jsx)("li",{children:"✓ Access to all rituals and meditations"}),(0,eo.jsx)("li",{children:"✓ Personalized astrological insights"}),(0,eo.jsx)("li",{children:"✓ Lunar cycle notifications"}),(0,eo.jsx)("li",{children:"✓ Exclusive content from spiritual teachers"})]}),(0,eo.jsx)(u,{onPress:l,title:r?"Redirecting...":t("subscribe_now"),disabled:r}),a&&(0,eo.jsx)("p",{className:"mt-4 text-center text-red-500",children:a})]})}var eu=r(54283),em=r(78361),eh=r(67038),ex=r(Object(function(){var e=Error("Cannot find module '@eshamanio/schemas'");throw e.code="MODULE_NOT_FOUND",e}())),eb=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),ep=r(19264);function eg({onRitualCreated:e}){let[t,r]=(0,eu.useState)("idle"),[s,a]=(0,eu.useState)(null),{register:n,handleSubmit:l,reset:i,formState:{errors:o}}=(0,em.useForm)({resolver:(0,eh.zodResolver)(ex.RitualSchema.omit({userId:!0,createdAt:!0}))}),c=async t=>{r("loading"),a(null);try{let s=(0,eb.getFirebaseFunctions)(),a=(0,eb.httpsCallable)(s,"createRitual");await a(t),r("success"),i(),e()}catch(e){r("error"),a(e.message)}finally{r("idle")}};return(0,ep.jsxs)(d,{className:"p-8",children:[(0,ep.jsx)("h2",{className:"mb-4 text-2xl font-bold",children:"Create a New Ritual"}),(0,ep.jsxs)("form",{onSubmit:l(c),className:"flex flex-col space-y-4",children:[(0,ep.jsx)("input",{...n("name"),placeholder:"Ritual Name (e.g., Morning Meditation)",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),o.name&&(0,ep.jsx)("p",{className:"text-red-500",children:o.name.message}),(0,ep.jsx)("textarea",{...n("description"),placeholder:"Description (optional)",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),s&&(0,ep.jsx)("p",{className:"text-red-500",children:s}),(0,ep.jsx)(u,{onPress:l(c),title:"loading"===t?"Creating...":"Create Ritual",disabled:"loading"===t})]})]})}var ef=r(54283),ej=r(36002),eN=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),ev=r(19264);function ey(){let{user:e}=P(),[t,r]=(0,ef.useState)([]),[s,a]=(0,ef.useState)(!0);return((0,ef.useEffect)(()=>{if(!e){a(!1);return}let t=(0,eN.getFirebaseDb)(),s=(0,ej.collection)(t,"rituals"),n=(0,ej.query)(s,(0,ej.where)("userId","==",e.uid)),l=(0,ej.onSnapshot)(n,e=>{r(e.docs.map(e=>({id:e.id,...e.data()}))),a(!1)});return()=>l()},[e]),s)?(0,ev.jsx)("p",{children:"Loading rituals..."}):e?0===t.length?(0,ev.jsx)("p",{children:"You haven't created any rituals yet."}):(0,ev.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,ev.jsxs)(d,{className:"p-4",children:[(0,ev.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,ev.jsx)("p",{className:"text-brand-neutral-dark",children:e.description})]},e.id))}):(0,ev.jsx)("p",{children:"Please log in to see your rituals."})}var eO=r(54283),ew=r(78361),eP=r(67038),eS=r(Object(function(){var e=Error("Cannot find module '@eshamanio/schemas'");throw e.code="MODULE_NOT_FOUND",e}())),eE=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),eF=r(36002),eD=r(19264);function e_({onEntrySaved:e}){let{user:t}=P(),[r,s]=(0,eO.useState)("idle"),[a,n]=(0,eO.useState)(null),{register:l,handleSubmit:i,reset:o,formState:{errors:c}}=(0,ew.useForm)({resolver:(0,eP.zodResolver)(eS.JournalEntrySchema.omit({userId:!0,createdAt:!0,updatedAt:!0}))}),m=async r=>{if(!t){n("You must be logged in to save an entry.");return}s("loading"),n(null);try{let s=(0,eE.getFirebaseDb)();await (0,eF.addDoc)((0,eF.collection)(s,"journalEntries"),{...r,userId:t.uid,createdAt:(0,eF.serverTimestamp)(),updatedAt:(0,eF.serverTimestamp)()}),o(),e()}catch(e){s("error"),n(e.message)}finally{s("idle")}};return(0,eD.jsxs)(d,{className:"p-8",children:[(0,eD.jsx)("h2",{className:"mb-4 text-2xl font-bold",children:"New Journal Entry"}),(0,eD.jsxs)("form",{onSubmit:i(m),className:"flex flex-col space-y-4",children:[(0,eD.jsx)("input",{...l("title"),placeholder:"Entry Title",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),c.title&&(0,eD.jsx)("p",{className:"text-red-500",children:c.title.message}),(0,eD.jsx)("textarea",{...l("content"),placeholder:"Write your thoughts...",rows:5,className:"rounded-lg bg-brand-primary-light p-4 text-white"}),c.content&&(0,eD.jsx)("p",{className:"text-red-500",children:c.content.message}),a&&(0,eD.jsx)("p",{className:"text-red-500",children:a}),(0,eD.jsx)(u,{onPress:i(m),title:"loading"===r?"Saving...":"Save Entry",disabled:"loading"===r})]})]})}var eC=r(54283),eU=r(36002),eT=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),eL=r(19264);function eM(){let{user:e}=P(),[t,r]=(0,eC.useState)([]),[s,a]=(0,eC.useState)(!0);return((0,eC.useEffect)(()=>{if(!e){a(!1);return}let t=(0,eT.getFirebaseDb)(),s=(0,eU.collection)(t,"journalEntries"),n=(0,eU.query)(s,(0,eU.where)("userId","==",e.uid),(0,eU.orderBy)("createdAt","desc")),l=(0,eU.onSnapshot)(n,e=>{r(e.docs.map(e=>({id:e.id,...e.data()}))),a(!1)});return()=>l()},[e]),s)?(0,eL.jsx)("p",{children:"Loading journal..."}):e?0===t.length?(0,eL.jsx)("p",{children:"You haven't written any journal entries yet."}):(0,eL.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,eL.jsxs)(d,{className:"p-4",children:[(0,eL.jsx)("h3",{className:"text-xl font-bold",children:e.title}),(0,eL.jsx)("p",{className:"text-brand-neutral-dark",children:e.content})]},e.id))}):(0,eL.jsx)("p",{children:"Please log in to see your journal."})}var eA=r(54283),eR=r(78361),ek=r(67038),eI=r(Object(function(){var e=Error("Cannot find module '@eshamanio/schemas'");throw e.code="MODULE_NOT_FOUND",e}())),eW=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),ez=r(36002),eY=r(19264);function eB({onThreadCreated:e}){let{user:t}=P(),[r,s]=(0,eA.useState)("idle"),[a,n]=(0,eA.useState)(null),{register:l,handleSubmit:i,reset:o,formState:{errors:c}}=(0,eR.useForm)({resolver:(0,ek.zodResolver)(eI.ForumThreadSchema.omit({userId:!0,userName:!0,createdAt:!0,lastReplyAt:!0}))}),m=async r=>{if(!t||!t.displayName){n("You must be logged in and have a display name to create a thread.");return}s("loading"),n(null);try{let s=(0,eW.getFirebaseDb)();await (0,ez.addDoc)((0,ez.collection)(s,"forumThreads"),{...r,userId:t.uid,userName:t.displayName,createdAt:(0,ez.serverTimestamp)(),lastReplyAt:(0,ez.serverTimestamp)()}),o(),e()}catch(e){s("error"),n(e.message)}finally{s("idle")}};return(0,eY.jsxs)(d,{className:"p-8",children:[(0,eY.jsx)("h2",{className:"mb-4 text-2xl font-bold",children:"Start a New Discussion"}),(0,eY.jsxs)("form",{onSubmit:i(m),className:"flex flex-col space-y-4",children:[(0,eY.jsx)("input",{...l("title"),placeholder:"Thread Title",className:"rounded-lg bg-brand-primary-light p-4 text-white"}),c.title&&(0,eY.jsx)("p",{className:"text-red-500",children:c.title.message}),(0,eY.jsxs)("select",{...l("category"),className:"rounded-lg bg-brand-primary-light p-4 text-white",children:[(0,eY.jsx)("option",{children:"General"}),(0,eY.jsx)("option",{children:"Rituals"}),(0,eY.jsx)("option",{children:"Astrology"}),(0,eY.jsx)("option",{children:"Meditations"})]}),a&&(0,eY.jsx)("p",{className:"text-red-500",children:a}),(0,eY.jsx)(u,{onPress:i(m),title:"loading"===r?"Posting...":"Post Thread",disabled:"loading"===r})]})]})}var e$=r(54283),eJ=r(36002),eq=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),eV=r(19264);function eH(){let{user:e}=P(),[t,r]=(0,e$.useState)([]),[s,a]=(0,e$.useState)(!0);return((0,e$.useEffect)(()=>{let e=(0,eq.getFirebaseDb)(),t=(0,eJ.collection)(e,"forumThreads"),s=(0,eJ.query)(t,(0,eJ.orderBy)("lastReplyAt","desc")),n=(0,eJ.onSnapshot)(s,e=>{r(e.docs.map(e=>({id:e.id,...e.data()}))),a(!1)});return()=>n()},[]),s)?(0,eV.jsx)("p",{children:"Loading discussions..."}):e?0===t.length?(0,eV.jsx)("p",{children:"No discussions have been started yet."}):(0,eV.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,eV.jsxs)(d,{className:"p-4",children:[(0,eV.jsx)("h3",{className:"text-xl font-bold",children:e.title}),(0,eV.jsxs)("p",{className:"text-sm text-brand-neutral-dark",children:["Posted by ",e.userName," in ",e.category]})]},e.id))}):(0,eV.jsx)("p",{children:"Please log in to view the forum."})}var eK=r(54283),eG=r(36002),eQ=r(Object(function(){var e=Error("Cannot find module '@eshamanio/firebase-client'");throw e.code="MODULE_NOT_FOUND",e}())),eX=r(19264);function eZ(){let{user:e}=P(),[t,r]=(0,eK.useState)([]),[s,a]=(0,eK.useState)(!0);return((0,eK.useEffect)(()=>{let e=(0,eQ.getFirebaseDb)(),t=(0,eG.collection)(e,"meditations"),s=(0,eG.query)(t),n=(0,eG.onSnapshot)(s,e=>{r(e.docs.map(e=>({id:e.id,...e.data()}))),a(!1)},e=>{console.error("Error fetching meditations:",e),a(!1)});return()=>n()},[]),s)?(0,eX.jsx)("p",{children:"Loading meditations..."}):e?(0,eX.jsxs)("div",{className:"space-y-4",children:[(0,eX.jsx)("h2",{className:"mb-4 text-center text-4xl font-bold",children:"Guided Meditations"}),t.map(e=>(0,eX.jsxs)(d,{className:"p-6",children:[(0,eX.jsx)("h3",{className:"text-2xl font-bold",children:e.title}),(0,eX.jsx)("p",{className:"mb-4 text-brand-neutral-dark",children:e.description}),(0,eX.jsx)(u,{onPress:()=>alert(`Playing: ${e.title}`),title:`Play (${Math.floor(e.duration/60)} min)`})]},e.id))]}):(0,eX.jsx)("p",{children:"Please log in to listen to meditations."})}var e0=r(54283),e4=r(19264),e2=({children:e})=>{let{user:t}=P();return(0,e0.useEffect)(()=>{},[]),(0,e0.useEffect)(()=>{},[t]),(0,e4.jsx)(e4.Fragment,{children:e})},e1=({children:e})=>(0,e4.jsx)(w,{children:(0,e4.jsx)(e2,{children:e})})}};